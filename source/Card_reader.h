//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
//	@file		Card_reader.h									//
//	@brief		Driver for usage of the card reader 			//
//	@author		Grupo	4										//
//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////

#ifndef _CARD_READER_H_
#define _CARD_READER_H_

//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
//							Headers								//
//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////

#include <stdint.h>
#include <stdbool.h>

//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
//		CONSTANT AND MACRO DEFINITIONS USING #DEFINE 		 	//
//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////

#define CARD_DATA_LENGTH	256	//bits en la targeta, midiendolo llegue a que eran 256
#define CARD_DATA_LENGTH_32	(CARD_DATA_LENGTH/32)
#define CARD_CHARACTERS_LENGTH	40 //Segun la consigna.
#define CARD_PAN_LENGHT			19
#define	CARD_EXP_LENGHT			4
#define CARD_SERVICE_LENGHT		3
#define CARD_PVKI_LENGHT		1
#define CARD_PVV_LENGHT			4
#define CARD_CVV_LENGHT			3

//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
//			ENUMERATIONS AND STRUCTURES AND TYPEDEFS			//
//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////

typedef void (*card_callback_t)(void);

//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////
//			FUNCTION PROTOTYPES WITH GLOBAL SCOPE				//
//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////

void card_init(card_callback_t callback);
/*****************************************************************
 * @brief: Initializer the card reader driver and its components
 * @param callback: callback to be called when a new card is readed.
 ****************************************************************/

uint8_t * get_data(void);
/*****************************************************************
 * @brief: When the callback is called, one must obtain the data readed
 * 			by the driver, so this function returns the data.
 * 			(It must be called in the callback specified above).
 * @return: An array of lenght CARD_DATA_LENGTH containing the data
 * 			readed.
 ****************************************************************/


#endif	//_CARD_READER_H_
